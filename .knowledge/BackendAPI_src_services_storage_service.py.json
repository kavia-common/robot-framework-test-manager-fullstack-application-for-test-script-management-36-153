{"is_source_file": true, "format": "Python", "description": "This file implements a StorageService class for managing files in a MinIO object storage system, including uploading, downloading, generating URLs, and deleting logs. It encapsulates MinIO client initialization and bucket management, providing a simplified interface for storage operations related to test logs and large files within a test management system.", "external_files": ["minio", "minio.error", "io", "src.core.config"], "external_methods": ["Minio", "S3Error", "BytesIO"], "published": ["storage_service"], "classes": [{"name": "StorageService", "description": "A class for interacting with MinIO object storage, providing methods to upload, download, generate URLs, and delete log files."}], "methods": [{"name": "__init__(self)", "description": "Initializes the StorageService instance, setting up default values and preparing for lazy initialization.", "scope": "StorageService", "scopeKind": "class"}, {"name": "_initialize(self)", "description": "Lazily initializes the MinIO client connection and ensures that the bucket exists.", "scope": "StorageService", "scopeKind": "class"}, {"name": "_ensure_bucket_exists(self)", "description": "Checks if the designated bucket exists in MinIO and creates it if it does not.", "scope": "StorageService", "scopeKind": "class"}, {"name": "str upload_log(self, object_name: str, data: bytes)", "description": "Uploads log data as bytes to MinIO under a specified object name, returning its path or URL.", "scope": "StorageService", "scopeKind": "class"}, {"name": "str get_log_url(self, object_name: str, expires_in_seconds: int = 3600)", "description": "Generates a presigned URL to access a log file in MinIO, with optional expiration time.", "scope": "StorageService", "scopeKind": "class"}, {"name": "bytes download_log(self, object_name: str)", "description": "Downloads log data from MinIO as bytes, given an object name.", "scope": "StorageService", "scopeKind": "class"}, {"name": "bool delete_log(self, object_name: str)", "description": "Deletes a log file from MinIO based on the object name, returning True if successful.", "scope": "StorageService", "scopeKind": "class"}], "calls": ["Minio", "self.client.bucket_exists", "self.client.make_bucket", "self.client.put_object", "self.client.presigned_get_object", "self.client.get_object", "self.client.remove_object"], "search-terms": ["MinIO", "storage", "log upload", "presigned URL", "test logs", "bucket management", "S3Error handling"], "state": 2, "file_id": 13, "knowledge_revision": 88, "git_revision": "", "revision_history": [{"27": ""}, {"79": ""}, {"85": ""}, {"86": ""}, {"87": ""}, {"88": ""}], "ctags": [{"_type": "tag", "name": "StorageService", "path": "/home/kavia/workspace/code-generation/robot-framework-test-manager-fullstack-application-for-test-script-management-36-153/BackendAPI/src/services/storage_service.py", "pattern": "/^class StorageService:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/robot-framework-test-manager-fullstack-application-for-test-script-management-36-153/BackendAPI/src/services/storage_service.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "StorageService", "scopeKind": "class"}, {"_type": "tag", "name": "_ensure_bucket_exists", "path": "/home/kavia/workspace/code-generation/robot-framework-test-manager-fullstack-application-for-test-script-management-36-153/BackendAPI/src/services/storage_service.py", "pattern": "/^    def _ensure_bucket_exists(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "StorageService", "scopeKind": "class"}, {"_type": "tag", "name": "_initialize", "path": "/home/kavia/workspace/code-generation/robot-framework-test-manager-fullstack-application-for-test-script-management-36-153/BackendAPI/src/services/storage_service.py", "pattern": "/^    def _initialize(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "StorageService", "scopeKind": "class"}, {"_type": "tag", "name": "delete_log", "path": "/home/kavia/workspace/code-generation/robot-framework-test-manager-fullstack-application-for-test-script-management-36-153/BackendAPI/src/services/storage_service.py", "pattern": "/^    def delete_log(self, object_name: str) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self, object_name: str)", "scope": "StorageService", "scopeKind": "class"}, {"_type": "tag", "name": "download_log", "path": "/home/kavia/workspace/code-generation/robot-framework-test-manager-fullstack-application-for-test-script-management-36-153/BackendAPI/src/services/storage_service.py", "pattern": "/^    def download_log(self, object_name: str) -> bytes:$/", "language": "Python", "typeref": "typename:bytes", "kind": "member", "signature": "(self, object_name: str)", "scope": "StorageService", "scopeKind": "class"}, {"_type": "tag", "name": "get_log_url", "path": "/home/kavia/workspace/code-generation/robot-framework-test-manager-fullstack-application-for-test-script-management-36-153/BackendAPI/src/services/storage_service.py", "pattern": "/^    def get_log_url(self, object_name: str, expires_in_seconds: int = 3600) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, object_name: str, expires_in_seconds: int = 3600)", "scope": "StorageService", "scopeKind": "class"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/robot-framework-test-manager-fullstack-application-for-test-script-management-36-153/BackendAPI/src/services/storage_service.py", "pattern": "/^logger = logging.getLogger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "storage_service", "path": "/home/kavia/workspace/code-generation/robot-framework-test-manager-fullstack-application-for-test-script-management-36-153/BackendAPI/src/services/storage_service.py", "pattern": "/^storage_service = StorageService()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "upload_log", "path": "/home/kavia/workspace/code-generation/robot-framework-test-manager-fullstack-application-for-test-script-management-36-153/BackendAPI/src/services/storage_service.py", "pattern": "/^    def upload_log(self, object_name: str, data: bytes) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, object_name: str, data: bytes)", "scope": "StorageService", "scopeKind": "class"}], "hash": "6f5004d1e56ed5cf05639ef460506fec", "format-version": 4, "code-base-name": "BackendAPI", "filename": "BackendAPI/src/services/storage_service.py", "fields": [{"name": "logger = logging.getLogger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "storage_service = StorageService()", "scope": "", "scopeKind": "", "description": "unavailable"}]}